---
description: This is a new rule
alwaysApply: false
---
I want to create 4 s3 tables for my deployed streamlit app. I will be describing these as if they are for a single user, but this should be uniquely implemented for every user. II'm unsure about the structure or terminology between a table or just creating a single table with rows, so best practice for retrieval should be used for the cloud storage system I'm describing. mportantly, to identify these tables, the cognito's auth with the user ID should be retrieved after login, from its return or however th e loggd in user info is stored, and used. The tables should be linked with foreign key based around the user id from cognito. First, there is a user info table.  I want to use the initial screen, asking for the grade level, first name, last name, major, etc. only if attempting to retrieve a user info row with the user id from cognito as its identifier and each field as a row within this data table overall. This info should be retrieved from s3 if present in the database on login and it should be used to initialize this info in the system prompt as the form does now.  Next, there should be a conversation history  table, storing a conversation ID, date, and user ID for each user. These conversation IDs should correspond to ta conversation table for each conversation. This table should, in rows and format, mimic The dropbox export structure and rows used now. On login, the conversation history should be retrieved by user id and then each conversation id should be used to retrieve and load the last 5 conversations on the side bar, replacing the current demo instructions, and should be used to toggle between or resume old chats. help me decide the best way to structure the functionality I've described and have ti work efficiently within the current @demo/demo-v1/app.py and @demo/demo-v1/utils/cognito_auth.py  architecture. Use web resources and examples. The messages should be referencable in RAG eventually for memory per user, hence the need for a vector store. 